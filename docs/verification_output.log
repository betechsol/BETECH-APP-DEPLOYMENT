[0;34m[2025-07-14 11:22:27] ğŸ”§ BETECH EKS ALB Controller Permissions Verification & Auto-Fix[0m
==================================================================
[0;34m[2025-07-14 11:22:31] Cluster: betech-eks-cluster, Region: us-west-2[0m
[0;34m[2025-07-14 11:22:31] ğŸ” Verifying OIDC trust policy format...[0m
[0;32mâœ… OIDC trust policy format is correct[0m
[0;34m[2025-07-14 11:22:36] ğŸ” Verifying IAM permissions for AWS Load Balancer Controller...[0m
[0;32mâœ… All required IAM permissions are present[0m
[0;34m[2025-07-14 11:22:42] ï¿½ Verifying EKS security group tags...[0m
[0;32mâœ… Security group has correct kubernetes.io/cluster tag[0m
[0;34m[2025-07-14 11:22:44] ğŸ” Verifying security group ingress rules for backend pod access...[0m
[0;32mâœ… Security group allows all traffic (includes backend port access)[0m
[0;34m[2025-07-14 11:22:48] ğŸ” Verifying AWS Load Balancer Controller deployment...[0m
[0;32mâœ… AWS Load Balancer Controller is deployed and running (2 pods ready)[0m
[0;34m[2025-07-14 11:22:51] ğŸ” Verifying service account IAM role annotation...[0m
[0;32mâœ… Service account has correct IAM role annotation[0m
[0;34m[2025-07-14 11:22:56] ğŸ” Verifying ingress and target group health...[0m
[0;32mâœ… Ingress has ALB address: k8s-default-betechne-273078bb02-1163304503.us-west-2.elb.amazonaws.com[0m
[0;32mâœ… All target groups are healthy[0m
[0;34m[2025-07-14 11:23:00] ğŸ§ª Testing application accessibility...[0m
[0;32mâœ… HTTP to HTTPS redirect working (301 response)[0m
[0;32mâœ… HTTPS frontend accessible (200 response)[0m
[0;32mâœ… Backend API accessible (response: 404)[0m

==================================================================
[0;32mâœ… ğŸ‰ All verifications passed! ALB Controller is properly configured.[0m
==================================================================
[0;34m[2025-07-14 11:23:01] Script completed. Current application status:[0m
NAME                CLASS    HOSTS                      ADDRESS                                                                  PORTS   AGE
betechnet-ingress   <none>   betech-app.betechsol.com   k8s-default-betechne-273078bb02-1163304503.us-west-2.elb.amazonaws.com   80      7m6s
NAME                                            READY   STATUS    RESTARTS   AGE
aws-load-balancer-controller-7b9fcfc449-mqcr2   1/1     Running   0          3m36s
aws-load-balancer-controller-7b9fcfc449-vh5md   1/1     Running   0          3m25s
