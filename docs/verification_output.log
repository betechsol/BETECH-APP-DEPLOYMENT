[0;34m[2025-07-14 11:22:27] 🔧 BETECH EKS ALB Controller Permissions Verification & Auto-Fix[0m
==================================================================
[0;34m[2025-07-14 11:22:31] Cluster: betech-eks-cluster, Region: us-west-2[0m
[0;34m[2025-07-14 11:22:31] 🔍 Verifying OIDC trust policy format...[0m
[0;32m✅ OIDC trust policy format is correct[0m
[0;34m[2025-07-14 11:22:36] 🔍 Verifying IAM permissions for AWS Load Balancer Controller...[0m
[0;32m✅ All required IAM permissions are present[0m
[0;34m[2025-07-14 11:22:42] � Verifying EKS security group tags...[0m
[0;32m✅ Security group has correct kubernetes.io/cluster tag[0m
[0;34m[2025-07-14 11:22:44] 🔍 Verifying security group ingress rules for backend pod access...[0m
[0;32m✅ Security group allows all traffic (includes backend port access)[0m
[0;34m[2025-07-14 11:22:48] 🔍 Verifying AWS Load Balancer Controller deployment...[0m
[0;32m✅ AWS Load Balancer Controller is deployed and running (2 pods ready)[0m
[0;34m[2025-07-14 11:22:51] 🔍 Verifying service account IAM role annotation...[0m
[0;32m✅ Service account has correct IAM role annotation[0m
[0;34m[2025-07-14 11:22:56] 🔍 Verifying ingress and target group health...[0m
[0;32m✅ Ingress has ALB address: k8s-default-betechne-273078bb02-1163304503.us-west-2.elb.amazonaws.com[0m
[0;32m✅ All target groups are healthy[0m
[0;34m[2025-07-14 11:23:00] 🧪 Testing application accessibility...[0m
[0;32m✅ HTTP to HTTPS redirect working (301 response)[0m
[0;32m✅ HTTPS frontend accessible (200 response)[0m
[0;32m✅ Backend API accessible (response: 404)[0m

==================================================================
[0;32m✅ 🎉 All verifications passed! ALB Controller is properly configured.[0m
==================================================================
[0;34m[2025-07-14 11:23:01] Script completed. Current application status:[0m
NAME                CLASS    HOSTS                      ADDRESS                                                                  PORTS   AGE
betechnet-ingress   <none>   betech-app.betechsol.com   k8s-default-betechne-273078bb02-1163304503.us-west-2.elb.amazonaws.com   80      7m6s
NAME                                            READY   STATUS    RESTARTS   AGE
aws-load-balancer-controller-7b9fcfc449-mqcr2   1/1     Running   0          3m36s
aws-load-balancer-controller-7b9fcfc449-vh5md   1/1     Running   0          3m25s
